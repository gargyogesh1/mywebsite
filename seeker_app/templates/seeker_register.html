{% extends "common.html" %}

{% block headCss %}
<style>
    body {
        background-color: #f9f9f9;
    }
    .register-container {
        max-width: 500px;
        margin: 50px auto;
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .register-container h2 {
        text-align: center;
        margin-bottom: 20px;
    }
    .password-rules p {
        margin: 4px 0;
        color: red;
        font-size: 0.9em;
        transition: color 0.3s ease;
    }
    .password-rules p.valid {
        color: green;
    }
</style>
{% endblock %}

{% block content %}
<div class="register-container">
    <h2>Job Seeker Registration</h2>

    {% if errors %}
        <div class="alert alert-danger">
            <ul>
                {% for error in errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <form method="POST">
        {% csrf_token %}
        <div class="mb-3">
            <label class="form-label">Full Name*</label>
            <input type="text" class="form-control" name="name" value="{{ full_name|default:'' }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Email ID*</label>
            <input type="email" class="form-control" name="email" value="{{ email_id|default:'' }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Mobile Number*</label>
            <input type="text" class="form-control" name="mobile" value="{{ mobile_number|default:'' }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Work Status*</label>
            <select class="form-select" name="work_status" required>
                <option value="">Select Work Status</option>
                <option value="Employed" {% if work_status == "Employed" %}selected{% endif %}>Employed</option>
                <option value="Unemployed" {% if work_status == "Unemployed" %}selected{% endif %}>Unemployed</option>
                <option value="Student" {% if work_status == "Student" %}selected{% endif %}>Student</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Password*</label>
            <input type="password" class="form-control" id="password" name="password" required>
        </div>

        <div class="password-rules">
            <p id="lower">One small alphabet (a–z)</p>
            <p id="upper">One capital alphabet (A–Z)</p>
            <p id="number">One number (0–9)</p>
            <p id="special">One special character (!@#$%^&*_-?.)</p>
            <p id="length">8–40 characters</p>
        </div>

        <div class="mb-3">
            <label class="form-label">Confirm Password*</label>
            <input type="password" class="form-control" name="confirm_password" required>
        </div>

        <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" name="promotions" id="promotions" {% if promotions %}checked{% endif %}>
            <label class="form-check-label" for="promotions">Receive promotional emails</label>
        </div>

        <button type="submit" class="btn btn-primary w-100">Register</button>
    </form>
</div>

<script>
    const passwordInput = document.getElementById("password");
    const lower = document.getElementById("lower");
    const upper = document.getElementById("upper");
    const number = document.getElementById("number");
    const special = document.getElementById("special");
    const length = document.getElementById("length");

    passwordInput.addEventListener("input", function () {
        const val = passwordInput.value;

        /[a-z]/.test(val) ? lower.classList.add("valid") : lower.classList.remove("valid");
        /[A-Z]/.test(val) ? upper.classList.add("valid") : upper.classList.remove("valid");
        /[0-9]/.test(val) ? number.classList.add("valid") : number.classList.remove("valid");
        /[!@#$%^&*_\-?.]/.test(val) ? special.classList.add("valid") : special.classList.remove("valid");
        (val.length >= 8 && val.length <= 40) ? length.classList.add("valid") : length.classList.remove("valid");
    });
</script>
{% endblock %}
