{% extends "common.html" %}
{% block headCss %}
<style>
    body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #f9f9f9, #e0eafc);
        animation: fadeIn 1.5s ease-in-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .container {
        width: 90%;
        margin: 20px auto;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transform: translateY(0);
        animation: slideUp 0.8s ease-in-out;
    }

    @keyframes slideUp {
        from { transform: translateY(30px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    .header {
        display: flex;
        align-items: center;
        animation: bounceIn 1.5s;
    }

    @keyframes bounceIn {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
        }
        40% {
            transform: translateY(-20px);
        }
        60% {
            transform: translateY(-10px);
        }
    }

    .header h1 {
        font-size: 28px;
        margin: 0;
    }

    .quick-links {
        margin: 20px 0;
        padding: 10px;
        background: #f4f4f4;
        border-radius: 10px;
        box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .quick-links a {
        text-decoration: none;
        color: #007bff;
        font-weight: bold;
        transition: color 0.3s ease-in-out;
    }

    .quick-links a:hover {
        color: #ff5722;
    }

    section h2 {
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
    }

    input, textarea {
        width: 100%;
        padding: 8px;
        margin: 8px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
        transition: box-shadow 0.3s ease;
    }

    input:focus, textarea:focus {
        box-shadow: 0 0 5px #007bff;
    }

    .submit-btn {
        background-color: #28a745;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    .submit-btn:hover {
        background-color: #218838;
    }

    /* Progress Bar */
    .progress-container {
        height: 8px;
        background: #e0e0e0;
        border-radius: 5px;
        margin: 10px 0;
        position: sticky;
        top: 0;
        z-index: 10;
    }

    .progress-bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #ff7eb3, #ff5722);
        border-radius: 5px;
        transition: width 0.3s;
    }
    </style>

{% endblock %}

{% block content %}

    <div class="container">
        <!-- Header Section -->
        <div class="header animate-header">
            <div class="profile-photo">
                <div class="photo-placeholder">Add Photo</div>
                <input type="file" id="profile-photo" />
            </div>
            <div class="profile-info">
                <h1>Seeker Profile Form</h1>
                <p>Fill out the following sections to complete your profile</p>
            </div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        {% if messages %}
            {% for message in messages %}
                <p class="{{ message.tags }}">{{ message }}</p>
            {% endfor %}
        {% endif %}

        <!-- Navigation Menu -->
        <div class="quick-links animate-links">
            <ul>
                <li><a href="#preference">Preference</a></li>
                <li><a href="#education">Education</a></li>
                <li><a href="#skills">Key Skills</a></li>
                <li><a href="#languages">Languages</a></li>
                <li><a href="#internships">Internships</a></li>
                <li><a href="#projects">Projects</a></li>
                <li><a href="#summary">Profile Summary</a></li>
                <li><a href="#accomplishments">Accomplishments</a></li>
                <li><a href="#exams">Competitive Exams</a></li>
                <li><a href="#employment">Employment</a></li>
                <li><a href="#achievements">Academic Achievements</a></li>
                <li><a href="#resume">Resume</a></li>
            </ul>
        </div>

        <!-- Form Section -->
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Career Preferences -->
            <section id="preference">
                <h2>Your Career Preferences</h2>
                <label>Preferred Job Type:</label>
                <input type="text" name="job_type" placeholder="e.g., Full-Time" value="{{profile.preference.name}}">
                <label>Preferred Location:</label>
                <input type="text" name="location" placeholder="e.g., Delhi, NCR">
            </section>

            <!-- Education -->
            <section id="education">
                <h2>Education</h2>   
                 <button type="button" onclick="addEducation()">Add More Education</button>

                {% comment %} <label>Degree:</label>
                <input type="text" name="degree" placeholder="e.g., B.Tech">
                <label>Institution:</label>
                <input type="text" name="institution" placeholder="University Name">
                <label>Year of Passing:</label>
                <input type="number" name="year" placeholder="e.g., 2024"> {% endcomment %}
                <div style="margin-bottom:10px;">
                <div id="education-container">
                {% for edu in educations %}
                    <div class="education-entry">
                        <label>Degree:</label>
                        <select name="degree[]">
                            <option value="TENTH" {% if edu.degree == 'TENTH' %}selected{% endif %}>10th</option>
                            <option value="TWELFTH" {% if edu.degree == 'TWELFTH' %}selected{% endif %}>12th</option>
                            <option value="DIPLOMA" {% if edu.degree == 'DIPLOMA' %}selected{% endif %}>Diploma</option>
                            <option value="GRADUATION" {% if edu.degree == 'GRADUATION' %}selected{% endif %}>Graduation</option>
                            <option value="POSTGRADUATION" {% if edu.degree == 'POSTGRADUATION' %}selected{% endif %}>Postgraduation</option>
                            <option value="HIGHER_STUDIES" {% if edu.degree == 'HIGHER_STUDIES' %}selected{% endif %}>Higher Studies</option>
                        </select>

                        <label>Institution:</label>
                        <input type="text" name="institution[]" value="{{ edu.institution }}">

                        <label>Year of Starting:</label>
                        <input type="date" name="year_of_starting[]" value="{{ edu.year_of_starting|date:'Y-m-d' }}">

                        <label>Year of Passing:</label>
                        <input type="date" name="year_of_passing[]" value="{{ edu.year_of_passing|date:'Y-m-d' }}">

                        <label>Marks (%):</label>
                        <input type="number" name="marks[]" value="{{ edu.marks }}" min="0" max="100">
                        <button type="button" onclick="deleteEducation({{ edu.id }}, this)">Delete</button>

                    </div>

                    {% endfor %}
                </div>
                    <script>
                        function deleteEducation(id, btn) {
                            if (confirm('Are you sure you want to delete this education?')) {
                                fetch(`/seeker_app/delete_education/${id}/`, {
                                    method: 'POST',
                                    headers: {
                                        'X-CSRFToken': '{{ csrf_token }}',
                                    },
                                })
                                .then(res => res.json())
                                .then(data => {
                                    if (data.status === 'ok') {
                                        btn.parentElement.remove();  // Remove the div from DOM
                                    } else {
                                        alert('Failed to delete');
                                    }
                                });
                            }
                        }
                    function addEducation() {
                        const container = document.getElementById("education-container");

                        const newEntry = document.createElement("div");
                        newEntry.className = "education-entry";

                        newEntry.innerHTML = `
                            <label>Degree:</label>
                            <select name="degree[]">
                                <option value="TENTH">10th</option>
                                <option value="TWELFTH">12th</option>
                                <option value="DIPLOMA">Diploma</option>
                                <option value="GRADUATION">Graduation</option>
                                <option value="POSTGRADUATION">Postgraduation</option>
                                <option value="HIGHER_STUDIES">Higher Studies</option>
                            </select>

                            <label>Institution:</label>
                            <input type="text" name="institution[]" placeholder="University/School Name">

                            <label>Year of Starting:</label>
                            <input type="date" name="year_of_starting[]">

                            <label>Year of Passing:</label>
                            <input type="date" name="year_of_passing[]">

                            <label>Marks (%):</label>
                            <input type="number" name="marks[]" placeholder="e.g., 85" min="0" max="100">
                            <hr>
                            <button type="button" onclick="this.parentElement.remove()">Delete</button>

                        `;

                        container.appendChild(newEntry);
                    }
                    </script>

            </section>

            <!-- Key Skills -->
            <section id="skills">
                <h2>Key Skills</h2>
                <input type="text" name="skills" placeholder="e.g., HTML, CSS, JavaScript">
            </section>

            <!-- Languages -->
            <section id="languages">
                <h2>Languages</h2>
                <label>Language:</label>
                <input type="text" name="language_name" placeholder="e.g., English">
                <label>Proficiency:</label>
                <select name="proficiency">
                    <option value="basic">Basic</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="advanced">Advanced</option>
                </select>
            </section>

            <!-- Accomplishments -->
            <section id="accomplishments">
                <h2>Accomplishments</h2>
                <textarea name="accomplishments" placeholder="List your accomplishments"></textarea>
            </section>

            <!-- Competitive Exams -->
            <section id="exams">
                <h2>Competitive Exams</h2>
                <label>Exam Name:</label>
                <input type="text" name="exam_name" placeholder="e.g., GATE, CAT">
                <label>Score/Rank:</label>
                <input type="text" name="competitive_score" placeholder="e.g., 99.5 percentile">
            </section>

            <!-- Employment -->
            <section id="employment">
                <h2>Employment</h2>
                <label>Company Name:</label>
                <input type="text" name="employment_company_name" placeholder="Company Name">
                <label>Role:</label>
                <input type="text" name="employment_role" placeholder="Job Role">
                <label>Start Date:</label>
                <input type="date" name="employment_start_date">
                <label>End Date:</label>
                <input type="date" name="employment_end_date">
            </section>

            <!-- Academic Achievements -->
            <section id="achievements">
                <h2>Academic Achievements</h2>
                <textarea name="academic_achievements" placeholder="List your academic achievements"></textarea>
            </section>

            <!-- Projects -->
            <section id="projects">
                <h2>Projects</h2>
                <label>Title:</label>
                <input type="text" name="project_title" placeholder="Project Title">
                <label>Description:</label>
                <textarea name="project_description" placeholder="Describe your project"></textarea>
            </section>

            <!-- Profile Summary -->
            <section id="summary">
                <h2>Profile Summary</h2>
                <textarea name="summary" placeholder="Write a brief profile summary"></textarea>
            </section>

            <!-- Resume -->
            <section id="resume">
                <h2>Resume</h2>
                <label>Upload Resume:</label>
                <input type="file" name="resume">
            </section>

            <!-- Submit -->
            <button type="submit" class="submit-btn">Submit Profile</button>
        </form>
    </div>

    <script>
        // Smooth Scrolling for Navigation Links
        document.querySelectorAll('.quick-links a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const section = document.querySelector(this.getAttribute('href'));
                section.scrollIntoView({ behavior: 'smooth' });
            });
        });
        
        window.addEventListener('scroll', () => {
            const scrollTop = document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        });


    </script>


{% endblock %}
